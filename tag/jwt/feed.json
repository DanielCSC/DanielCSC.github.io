{
    "version": "https://jsonfeed.org/version/1",
    "title": "äº‘é›¾æ•£å°½ æˆ‘çˆ±ä½ äººå°½çš†çŸ¥ â€¢ All posts by \"jwt\" tag",
    "description": "äººç”Ÿæµ·æµ·  å±±å±±è€Œå·  ä¸è¿‡å°”å°”",
    "home_page_url": "https://github.com/DanielCSC/DanielCSC.github.io.git",
    "items": [
        {
            "id": "https://github.com/DanielCSC/DanielCSC.github.io.git/2020/11/20/Django--Rest-Framework-Jwt%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "url": "https://github.com/DanielCSC/DanielCSC.github.io.git/2020/11/20/Django--Rest-Framework-Jwt%E7%9A%84%E4%BD%BF%E7%94%A8/",
            "title": "Django--Rest-Framework-Jwtçš„ä½¿ç”¨",
            "date_published": "2020-11-20T12:32:51.000Z",
            "content_html": "<h3 id=\"1jwtå®‰è£…é…ç½®\"><a class=\"markdownIt-Anchor\" href=\"#1jwtå®‰è£…é…ç½®\">#</a> 1.JWT å®‰è£…é…ç½®</h3>\n<ul>\n<li>å®‰è£… JWT</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>pip install djangorestframework<span class=\"token operator\">-</span>jwt<span class=\"token operator\">==</span><span class=\"token number\">1.11</span><span class=\"token number\">.0</span></pre></td></tr></table></figure><ul>\n<li>\n<p><a href=\"https://mengfanxing.gitee.io/blog/2020/11/12/JWT\">äº†è§£ JWT åŸç†ç‹ ç‹ æˆ³æˆ‘ğŸ˜Š</a></p>\n</li>\n<li>\n<p>åœ¨ <code>settings.py</code>  é…ç½® jwt è½½è·ä¸­çš„æœ‰æ•ˆæœŸè®¾ç½®</p>\n</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token comment\"># jwt è½½è·ä¸­çš„æœ‰æ•ˆæœŸè®¾ç½®</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>JWT_AUTH <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token comment\"># 1.token å‰ç¼€ï¼šheaders ä¸­ Authorization å€¼çš„å‰ç¼€</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    <span class=\"token string\">'JWT_AUTH_HEADER_PREFIX'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'JWT'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token comment\"># 2.token æœ‰æ•ˆæœŸï¼šä¸€å¤©æœ‰æ•ˆ</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    <span class=\"token string\">'JWT_EXPIRATION_DELTA'</span><span class=\"token punctuation\">:</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>days<span class=\"token operator\">=</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    <span class=\"token comment\"># 3. åˆ·æ–° tokenï¼šå…è®¸ä½¿ç”¨æ—§çš„ token æ¢æ–° token</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token string\">'JWT_ALLOW_REFRESH'</span><span class=\"token punctuation\">:</span> <span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token comment\"># 4.token æœ‰æ•ˆæœŸï¼štoken åœ¨ 24 å°æ—¶å†…è¿‡æœŸï¼Œå¯ç»­æœŸ token</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token string\">'JWT_REFRESH_EXPIRATION_DELTA'</span><span class=\"token punctuation\">:</span> datetime<span class=\"token punctuation\">.</span>timedelta<span class=\"token punctuation\">(</span>hours<span class=\"token operator\">=</span><span class=\"token number\">24</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token comment\"># 5. è‡ªå®šä¹‰ JWT è½½è·ä¿¡æ¯ï¼šè‡ªå®šä¹‰è¿”å›æ ¼å¼ï¼Œéœ€è¦æ‰‹å·¥åˆ›å»º</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>    <span class=\"token string\">'JWT_RESPONSE_PAYLOAD_HANDLER'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'app01.views.jwt_response_payload_handler'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>åœ¨ <code>settings.py</code>  é…ç½®é»˜è®¤çš„è®¤è¯æ–¹å¼</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>REST_FRAMEWORK <span class=\"token operator\">=</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token comment\"># è®¤è¯å™¨</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>    <span class=\"token string\">'DEFAULT_AUTHENTICATION_CLASSES'</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token string\">'rest_framework_jwt.authentication.JSONWebTokenAuthentication'</span><span class=\"token punctuation\">,</span>  <span class=\"token comment\"># åœ¨ DRF ä¸­é…ç½® JWT è®¤è¯</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    <span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><ul>\n<li>åœ¨ <code>settings.py</code>  é…ç½®è‡ªå®šä¹‰éªŒè¯åç«¯ç™»å½•</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>AUTHENTICATION_BACKENDS <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token string\">'app01.views.Manylogin'</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><ul>\n<li>åœ¨ <code>settings.py</code>  æ³¨å†Œç”¨æˆ·æ¨¡å‹</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>AUTH_USER_MODEL <span class=\"token operator\">=</span> <span class=\"token string\">'app01.User'</span></pre></td></tr></table></figure><h3 id=\"2é‡å†™djangoç”¨æˆ·æ¨¡å‹\"><a class=\"markdownIt-Anchor\" href=\"#2é‡å†™djangoç”¨æˆ·æ¨¡å‹\">#</a> 2. é‡å†™ Django ç”¨æˆ·æ¨¡å‹</h3>\n<ul>\n<li><code>models.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> AbstractUser</pre></td></tr><tr><td data-num=\"3\"></td><td><pre></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token comment\"># ç”¨æˆ·è¡¨</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">User</span><span class=\"token punctuation\">(</span>AbstractUser<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    username <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">50</span><span class=\"token punctuation\">,</span>unique<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    password <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    email <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span>null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    phone <span class=\"token operator\">=</span> models<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>max_length<span class=\"token operator\">=</span><span class=\"token number\">255</span><span class=\"token punctuation\">,</span>null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">,</span>blank<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>        db_table <span class=\"token operator\">=</span> <span class=\"token string\">'tb_user'</span></pre></td></tr></table></figure><h3 id=\"3ç”Ÿæˆtoken\"><a class=\"markdownIt-Anchor\" href=\"#3ç”Ÿæˆtoken\">#</a> 3. ç”Ÿæˆ Token</h3>\n<ul>\n<li><code>utils.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework_jwt<span class=\"token punctuation\">.</span>settings <span class=\"token keyword\">import</span> api_settings</pre></td></tr><tr><td data-num=\"2\"></td><td><pre></pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">creare_token</span><span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>    jwt_payload_handler <span class=\"token operator\">=</span> api_settings<span class=\"token punctuation\">.</span>JWT_PAYLOAD_HANDLER</pre></td></tr><tr><td data-num=\"5\"></td><td><pre>    jwt_encode_handler <span class=\"token operator\">=</span> api_settings<span class=\"token punctuation\">.</span>JWT_ENCODE_HANDLER</pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    payload <span class=\"token operator\">=</span> jwt_payload_handler<span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    token <span class=\"token operator\">=</span> jwt_encode_handler<span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token keyword\">return</span> token</pre></td></tr></table></figure><h3 id=\"4åºåˆ—åŒ–å™¨\"><a class=\"markdownIt-Anchor\" href=\"#4åºåˆ—åŒ–å™¨\">#</a> 4. åºåˆ—åŒ–å™¨</h3>\n<ul>\n<li><code>serializers.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework <span class=\"token keyword\">import</span> serializers</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>hashers <span class=\"token keyword\">import</span> make_password</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>utils <span class=\"token keyword\">import</span> creare_token</pre></td></tr><tr><td data-num=\"5\"></td><td><pre></pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">CreateUserSerializers</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>Serializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    username <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    password <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    email <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>allow_null<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre>    phone <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    token <span class=\"token operator\">=</span> serializers<span class=\"token punctuation\">.</span>CharField<span class=\"token punctuation\">(</span>read_only<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">create</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> validated_data<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>create<span class=\"token punctuation\">(</span><span class=\"token operator\">**</span>validated_data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        password <span class=\"token operator\">=</span> make_password<span class=\"token punctuation\">(</span>validated_data<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>        user<span class=\"token punctuation\">.</span>password <span class=\"token operator\">=</span> password</pre></td></tr><tr><td data-num=\"17\"></td><td><pre>        user<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        token <span class=\"token operator\">=</span> create_token<span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        user<span class=\"token punctuation\">.</span>token <span class=\"token operator\">=</span> token</pre></td></tr><tr><td data-num=\"20\"></td><td><pre>        <span class=\"token keyword\">return</span> user</pre></td></tr></table></figure><h3 id=\"5æ³¨å†Œæ¥å£\"><a class=\"markdownIt-Anchor\" href=\"#5æ³¨å†Œæ¥å£\">#</a> 5. æ³¨å†Œæ¥å£</h3>\n<ul>\n<li><code>views.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>db<span class=\"token punctuation\">.</span>models <span class=\"token keyword\">import</span> Q</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> APIView</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>response <span class=\"token keyword\">import</span> Response</pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>serializers <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"6\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>contrib<span class=\"token punctuation\">.</span>auth<span class=\"token punctuation\">.</span>backends <span class=\"token keyword\">import</span> ModelBackend</pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>permissions <span class=\"token keyword\">import</span> IsAuthenticated</pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework_jwt<span class=\"token punctuation\">.</span>authentication <span class=\"token keyword\">import</span> JSONWebTokenAuthentication</pre></td></tr><tr><td data-num=\"9\"></td><td><pre></pre></td></tr><tr><td data-num=\"10\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserView</span><span class=\"token punctuation\">(</span>APIView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">post</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        data <span class=\"token operator\">=</span> request<span class=\"token punctuation\">.</span>data</pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">if</span> <span class=\"token keyword\">not</span> <span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'password2'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'email'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'phone'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">202</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'msg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'å‚æ•°ä¸å…¨'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>        <span class=\"token keyword\">if</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'password'</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">!=</span> data<span class=\"token punctuation\">[</span><span class=\"token string\">'password2'</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"19\"></td><td><pre>            <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">204</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'msg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'ä¸¤æ¬¡å¯†ç ä¸ä¸€è‡´'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"22\"></td><td><pre>            user <span class=\"token operator\">=</span> CreateUserSerializers<span class=\"token punctuation\">(</span>data<span class=\"token operator\">=</span>data<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"23\"></td><td><pre>            user<span class=\"token punctuation\">.</span>is_valid<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"24\"></td><td><pre>            user<span class=\"token punctuation\">.</span>save<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"25\"></td><td><pre>            <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'msg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'åˆ›å»ºç”¨æˆ·æˆåŠŸ'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'data'</span><span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"26\"></td><td><pre>        <span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"27\"></td><td><pre>            <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">201</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'msg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'åˆ›å»ºå¤±è´¥ï¼Œè¯·é‡è¯•'</span><span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><code>urls.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> app01 <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework_jwt<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> obtain_jwt_token</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'register/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>UserView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><ul>\n<li>Postman æµ‹è¯•</li>\n</ul>\n<p><img data-src=\"1.png\" alt></p>\n<h3 id=\"6ç™»å½•åŠå¤šå½¢å¼ç™»å½•\"><a class=\"markdownIt-Anchor\" href=\"#6ç™»å½•åŠå¤šå½¢å¼ç™»å½•\">#</a> 6. ç™»å½•åŠå¤šå½¢å¼ç™»å½•</h3>\n<ul>\n<li><code>views.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">def</span> <span class=\"token function\">jwt_response_payload_handler</span><span class=\"token punctuation\">(</span>token<span class=\"token punctuation\">,</span> user<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> request<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">return</span> <span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        <span class=\"token string\">'authenticated'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'true'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        <span class=\"token string\">'id'</span><span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span><span class=\"token builtin\">id</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>        <span class=\"token string\">'username'</span><span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>username<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>        <span class=\"token string\">'phone'</span><span class=\"token punctuation\">:</span>user<span class=\"token punctuation\">.</span>phone<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"7\"></td><td><pre>        <span class=\"token string\">'email'</span><span class=\"token punctuation\">:</span> user<span class=\"token punctuation\">.</span>email<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>        <span class=\"token string\">'token'</span><span class=\"token punctuation\">:</span> token<span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    <span class=\"token punctuation\">&#125;</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre><span class=\"token comment\"># å¤šå½¢å¼ç™»å½•</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">Manylogin</span><span class=\"token punctuation\">(</span>ModelBackend<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>    <span class=\"token comment\"># é‡å†™ authenticate æ–¹æ³•</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">authenticate</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">,</span> username<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> password<span class=\"token operator\">=</span><span class=\"token boolean\">None</span><span class=\"token punctuation\">,</span> <span class=\"token operator\">**</span>kwargs<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"15\"></td><td><pre>        <span class=\"token keyword\">try</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"16\"></td><td><pre>            user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span>get<span class=\"token punctuation\">(</span>Q<span class=\"token punctuation\">(</span>username<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> Q<span class=\"token punctuation\">(</span>phone<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span> <span class=\"token operator\">|</span> Q<span class=\"token punctuation\">(</span>email<span class=\"token operator\">=</span>username<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"17\"></td><td><pre>            <span class=\"token keyword\">if</span> user <span class=\"token keyword\">is</span> <span class=\"token keyword\">not</span> <span class=\"token boolean\">None</span> <span class=\"token keyword\">and</span> user<span class=\"token punctuation\">.</span>check_password<span class=\"token punctuation\">(</span>password<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"18\"></td><td><pre>                <span class=\"token keyword\">return</span> user</pre></td></tr><tr><td data-num=\"19\"></td><td><pre>        <span class=\"token keyword\">except</span> Exception <span class=\"token keyword\">as</span> e<span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"20\"></td><td><pre>            <span class=\"token keyword\">print</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"21\"></td><td><pre>            <span class=\"token keyword\">return</span> <span class=\"token boolean\">None</span></pre></td></tr></table></figure><ul>\n<li><code>urls.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> app01 <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework_jwt<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> obtain_jwt_token</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'register/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>UserView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>  </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'login/'</span><span class=\"token punctuation\">,</span> obtain_jwt_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><ul>\n<li>Postman æµ‹è¯•ç™»å½•</li>\n</ul>\n<p><img data-src=\"2.png\" alt></p>\n<ul>\n<li>Postman æµ‹è¯•å¤šå½¢å¼ç™»å½•</li>\n</ul>\n<p><img data-src=\"3.png\" alt></p>\n<h3 id=\"7æºå¸¦tokenè®¿é—®æ‰€æœ‰ç”¨æˆ·\"><a class=\"markdownIt-Anchor\" href=\"#7æºå¸¦tokenè®¿é—®æ‰€æœ‰ç”¨æˆ·\">#</a> 7. æºå¸¦ token è®¿é—®æ‰€æœ‰ç”¨æˆ·</h3>\n<ul>\n<li><code>serializers.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserInfoSerializers</span><span class=\"token punctuation\">(</span>serializers<span class=\"token punctuation\">.</span>ModelSerializer<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>    <span class=\"token keyword\">class</span> <span class=\"token class-name\">Meta</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>        model <span class=\"token operator\">=</span> User</pre></td></tr><tr><td data-num=\"4\"></td><td><pre>        fields <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token string\">'id'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'username'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'phone'</span><span class=\"token punctuation\">,</span><span class=\"token string\">'email'</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><code>views.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> APIView</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>response <span class=\"token keyword\">import</span> Response</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span>serializers <span class=\"token keyword\">import</span> <span class=\"token operator\">*</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token keyword\">from</span> <span class=\"token punctuation\">.</span> <span class=\"token keyword\">import</span> models</pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework<span class=\"token punctuation\">.</span>permissions <span class=\"token keyword\">import</span> IsAuthenticated</pre></td></tr><tr><td data-num=\"6\"></td><td><pre></pre></td></tr><tr><td data-num=\"7\"></td><td><pre><span class=\"token keyword\">class</span> <span class=\"token class-name\">UserInfoView</span><span class=\"token punctuation\">(</span>APIView<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    <span class=\"token comment\"># è®¤è¯ç”¨æˆ·æ‰å¯è®¿é—®</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre>    permission_classes <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span>IsAuthenticated<span class=\"token punctuation\">]</span></pre></td></tr><tr><td data-num=\"10\"></td><td><pre></pre></td></tr><tr><td data-num=\"11\"></td><td><pre>    <span class=\"token keyword\">def</span> <span class=\"token function\">get</span><span class=\"token punctuation\">(</span>self<span class=\"token punctuation\">,</span> request<span class=\"token punctuation\">)</span><span class=\"token punctuation\">:</span></pre></td></tr><tr><td data-num=\"12\"></td><td><pre>        user <span class=\"token operator\">=</span> User<span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token builtin\">all</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"13\"></td><td><pre>        obj <span class=\"token operator\">=</span> UserInfoSerializers<span class=\"token punctuation\">(</span>user<span class=\"token punctuation\">,</span> many<span class=\"token operator\">=</span><span class=\"token boolean\">True</span><span class=\"token punctuation\">)</span></pre></td></tr><tr><td data-num=\"14\"></td><td><pre>        <span class=\"token keyword\">return</span> Response<span class=\"token punctuation\">(</span><span class=\"token punctuation\">&#123;</span><span class=\"token string\">'code'</span><span class=\"token punctuation\">:</span> <span class=\"token number\">200</span><span class=\"token punctuation\">,</span> <span class=\"token string\">'msg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'æŸ¥è¯¢æˆåŠŸ'</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"data\"</span><span class=\"token punctuation\">:</span> obj<span class=\"token punctuation\">.</span>data<span class=\"token punctuation\">&#125;</span><span class=\"token punctuation\">)</span></pre></td></tr></table></figure><ul>\n<li><code>urls.py</code></li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token keyword\">from</span> django<span class=\"token punctuation\">.</span>urls <span class=\"token keyword\">import</span> path</pre></td></tr><tr><td data-num=\"2\"></td><td><pre><span class=\"token keyword\">from</span> app01 <span class=\"token keyword\">import</span> views</pre></td></tr><tr><td data-num=\"3\"></td><td><pre><span class=\"token keyword\">from</span> rest_framework_jwt<span class=\"token punctuation\">.</span>views <span class=\"token keyword\">import</span> obtain_jwt_token</pre></td></tr><tr><td data-num=\"4\"></td><td><pre></pre></td></tr><tr><td data-num=\"5\"></td><td><pre>urlpatterns <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span></pre></td></tr><tr><td data-num=\"6\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'register/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>UserView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> </pre></td></tr><tr><td data-num=\"7\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'login/'</span><span class=\"token punctuation\">,</span> obtain_jwt_token<span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"8\"></td><td><pre>    path<span class=\"token punctuation\">(</span><span class=\"token string\">'get_user/'</span><span class=\"token punctuation\">,</span> views<span class=\"token punctuation\">.</span>UserInfoView<span class=\"token punctuation\">.</span>as_view<span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"9\"></td><td><pre><span class=\"token punctuation\">]</span></pre></td></tr></table></figure><ul>\n<li>Postman æµ‹è¯•</li>\n</ul>\n<p><img data-src=\"4.png\" alt></p>\n",
            "tags": [
                "JWT"
            ]
        },
        {
            "id": "https://github.com/DanielCSC/DanielCSC.github.io.git/2020/11/12/JWT/",
            "url": "https://github.com/DanielCSC/DanielCSC.github.io.git/2020/11/12/JWT/",
            "title": "JWT--JSON WEB TOKEN",
            "date_published": "2020-11-12T11:39:37.000Z",
            "content_html": "<h1 id=\"json-web-token\"><a class=\"markdownIt-Anchor\" href=\"#json-web-token\">#</a> Json Web Token</h1>\n<h3 id=\"ä»€ä¹ˆæ˜¯jwt\"><a class=\"markdownIt-Anchor\" href=\"#ä»€ä¹ˆæ˜¯jwt\">#</a> ä»€ä¹ˆæ˜¯ JWT</h3>\n<blockquote>\n<p>Json web token (JWT), æ˜¯ä¸ºäº†åœ¨ç½‘ç»œåº”ç”¨ç¯å¢ƒé—´ä¼ é€’å£°æ˜è€Œæ‰§è¡Œçš„ä¸€ç§åŸºäº JSON çš„å¼€æ”¾æ ‡å‡† (RFC 7519). è¯¥ token è¢«è®¾è®¡ä¸ºç´§å‡‘ä¸”å®‰å…¨çš„ï¼Œç‰¹åˆ«é€‚ç”¨äºåˆ†å¸ƒå¼ç«™ç‚¹çš„å•ç‚¹ç™»å½•ï¼ˆSSOï¼‰åœºæ™¯ã€‚JWT çš„å£°æ˜ä¸€èˆ¬è¢«ç”¨æ¥åœ¨èº«ä»½æä¾›è€…å’ŒæœåŠ¡æä¾›è€…é—´ä¼ é€’è¢«è®¤è¯çš„ç”¨æˆ·èº«ä»½ä¿¡æ¯ï¼Œä»¥ä¾¿äºä»èµ„æºæœåŠ¡å™¨è·å–èµ„æºï¼Œä¹Ÿå¯ä»¥å¢åŠ ä¸€äº›é¢å¤–çš„å…¶å®ƒä¸šåŠ¡é€»è¾‘æ‰€å¿…é¡»çš„å£°æ˜ä¿¡æ¯ï¼Œè¯¥ token ä¹Ÿå¯ç›´æ¥è¢«ç”¨äºè®¤è¯ï¼Œä¹Ÿå¯è¢«åŠ å¯†ã€‚</p>\n</blockquote>\n<ul>\n<li>è¯´èµ· JWTï¼Œæˆ‘ä»¬åº”è¯¥æ¥è°ˆä¸€è°ˆåŸºäº token çš„è®¤è¯å’Œä¼ ç»Ÿçš„ session è®¤è¯çš„åŒºåˆ«ã€‚</li>\n</ul>\n<h3 id=\"ä¼ ç»Ÿçš„sessionè®¤è¯\"><a class=\"markdownIt-Anchor\" href=\"#ä¼ ç»Ÿçš„sessionè®¤è¯\">#</a> ä¼ ç»Ÿçš„ session è®¤è¯</h3>\n<p>æˆ‘ä»¬çŸ¥é“ï¼Œhttp åè®®æœ¬èº«æ˜¯ä¸€ç§æ— çŠ¶æ€çš„åè®®ï¼Œè€Œè¿™å°±æ„å‘³ç€å¦‚æœç”¨æˆ·å‘æˆ‘ä»¬çš„åº”ç”¨æä¾›äº†ç”¨æˆ·åå’Œå¯†ç æ¥è¿›è¡Œç”¨æˆ·è®¤è¯ï¼Œé‚£ä¹ˆä¸‹ä¸€æ¬¡è¯·æ±‚æ—¶ï¼Œç”¨æˆ·è¿˜è¦å†ä¸€æ¬¡è¿›è¡Œç”¨æˆ·è®¤è¯æ‰è¡Œï¼Œå› ä¸ºæ ¹æ® http åè®®ï¼Œæˆ‘ä»¬å¹¶ä¸èƒ½çŸ¥é“æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæ‰€ä»¥ä¸ºäº†è®©æˆ‘ä»¬çš„åº”ç”¨èƒ½è¯†åˆ«æ˜¯å“ªä¸ªç”¨æˆ·å‘å‡ºçš„è¯·æ±‚ï¼Œæˆ‘ä»¬åªèƒ½åœ¨æœåŠ¡å™¨å­˜å‚¨ä¸€ä»½ç”¨æˆ·ç™»å½•çš„ä¿¡æ¯ï¼Œè¿™ä»½ç™»å½•ä¿¡æ¯ä¼šåœ¨å“åº”æ—¶ä¼ é€’ç»™æµè§ˆå™¨ï¼Œå‘Šè¯‰å…¶ä¿å­˜ä¸º cookie, ä»¥ä¾¿ä¸‹æ¬¡è¯·æ±‚æ—¶å‘é€ç»™æˆ‘ä»¬çš„åº”ç”¨ï¼Œè¿™æ ·æˆ‘ä»¬çš„åº”ç”¨å°±èƒ½è¯†åˆ«è¯·æ±‚æ¥è‡ªå“ªä¸ªç”¨æˆ·äº†ï¼Œè¿™å°±æ˜¯ä¼ ç»Ÿçš„åŸºäº session è®¤è¯ã€‚</p>\n<p>ä½†æ˜¯è¿™ç§åŸºäº session çš„è®¤è¯ä½¿åº”ç”¨æœ¬èº«å¾ˆéš¾å¾—åˆ°æ‰©å±•ï¼Œéšç€ä¸åŒå®¢æˆ·ç«¯ç”¨æˆ·çš„å¢åŠ ï¼Œç‹¬ç«‹çš„æœåŠ¡å™¨å·²æ— æ³•æ‰¿è½½æ›´å¤šçš„ç”¨æˆ·ï¼Œè€Œè¿™æ—¶å€™åŸºäº session è®¤è¯åº”ç”¨çš„é—®é¢˜å°±ä¼šæš´éœ²å‡ºæ¥.</p>\n<h3 id=\"åŸºäºsessionè®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜\"><a class=\"markdownIt-Anchor\" href=\"#åŸºäºsessionè®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜\">#</a> åŸºäº session è®¤è¯æ‰€æ˜¾éœ²çš„é—®é¢˜</h3>\n<p><strong>Session</strong>: æ¯ä¸ªç”¨æˆ·ç»è¿‡æˆ‘ä»¬çš„åº”ç”¨è®¤è¯ä¹‹åï¼Œæˆ‘ä»¬çš„åº”ç”¨éƒ½è¦åœ¨æœåŠ¡ç«¯åšä¸€æ¬¡è®°å½•ï¼Œä»¥æ–¹ä¾¿ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚çš„é‰´åˆ«ï¼Œé€šå¸¸è€Œè¨€ session éƒ½æ˜¯ä¿å­˜åœ¨å†…å­˜ä¸­ï¼Œè€Œéšç€è®¤è¯ç”¨æˆ·çš„å¢å¤šï¼ŒæœåŠ¡ç«¯çš„å¼€é”€ä¼šæ˜æ˜¾å¢å¤§ã€‚</p>\n<p><strong>æ‰©å±•æ€§</strong>ï¼šç”¨æˆ·è®¤è¯ä¹‹åï¼ŒæœåŠ¡ç«¯åšè®¤è¯è®°å½•ï¼Œå¦‚æœè®¤è¯çš„è®°å½•è¢«ä¿å­˜åœ¨å†…å­˜ä¸­çš„è¯ï¼Œè¿™æ„å‘³ç€ç”¨æˆ·ä¸‹æ¬¡è¯·æ±‚è¿˜å¿…é¡»è¦è¯·æ±‚åœ¨è¿™å°æœåŠ¡å™¨ä¸Šï¼Œè¿™æ ·æ‰èƒ½æ‹¿åˆ°æˆæƒçš„èµ„æºï¼Œè¿™æ ·åœ¨åˆ†å¸ƒå¼çš„åº”ç”¨ä¸Šï¼Œç›¸åº”çš„é™åˆ¶äº†è´Ÿè½½å‡è¡¡å™¨çš„èƒ½åŠ›ã€‚è¿™ä¹Ÿæ„å‘³ç€é™åˆ¶äº†åº”ç”¨çš„æ‰©å±•èƒ½åŠ›ã€‚</p>\n<p><strong>CSRF</strong>: å› ä¸ºæ˜¯åŸºäº cookie æ¥è¿›è¡Œç”¨æˆ·è¯†åˆ«çš„ï¼Œcookie å¦‚æœè¢«æˆªè·ï¼Œç”¨æˆ·å°±ä¼šå¾ˆå®¹æ˜“å—åˆ°è·¨ç«™è¯·æ±‚ä¼ªé€ çš„æ”»å‡»ã€‚</p>\n<h3 id=\"jwtä¸sessionçš„å·®å¼‚\"><a class=\"markdownIt-Anchor\" href=\"#jwtä¸sessionçš„å·®å¼‚\">#</a> JWT ä¸ Session çš„å·®å¼‚</h3>\n<ul>\n<li>\n<p>ç›¸åŒç‚¹æ˜¯ï¼Œå®ƒä»¬éƒ½æ˜¯å­˜å‚¨ç”¨æˆ·ä¿¡æ¯ï¼›ç„¶è€Œï¼ŒSession æ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œè€Œ JWT æ˜¯åœ¨å®¢æˆ·ç«¯çš„ã€‚</p>\n</li>\n<li>\n<p>Session æ–¹å¼å­˜å‚¨ç”¨æˆ·ä¿¡æ¯çš„æœ€å¤§é—®é¢˜åœ¨äºè¦å ç”¨å¤§é‡æœåŠ¡å™¨å†…å­˜ï¼Œå¢åŠ æœåŠ¡å™¨çš„å¼€é”€ã€‚è€Œ JWT æ–¹å¼å°†ç”¨æˆ·çŠ¶æ€åˆ†æ•£åˆ°äº†å®¢æˆ·ç«¯ä¸­ï¼Œå¯ä»¥æ˜æ˜¾å‡è½»æœåŠ¡ç«¯çš„å†…å­˜å‹åŠ›ã€‚</p>\n</li>\n<li>\n<p>Session çš„çŠ¶æ€æ˜¯å­˜å‚¨åœ¨æœåŠ¡å™¨ç«¯ï¼Œå®¢æˆ·ç«¯åªæœ‰ session idï¼›è€Œ Token çš„çŠ¶æ€æ˜¯å­˜å‚¨åœ¨å®¢æˆ·ç«¯ã€‚</p>\n</li>\n</ul>\n<h3 id=\"åŸºäºtokençš„é‰´æƒæœºåˆ¶\"><a class=\"markdownIt-Anchor\" href=\"#åŸºäºtokençš„é‰´æƒæœºåˆ¶\">#</a> åŸºäº token çš„é‰´æƒæœºåˆ¶</h3>\n<p>åŸºäº token çš„é‰´æƒæœºåˆ¶ç±»ä¼¼äº http åè®®ä¹Ÿæ˜¯æ— çŠ¶æ€çš„ï¼Œå®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯å»ä¿ç•™ç”¨æˆ·çš„è®¤è¯ä¿¡æ¯æˆ–è€…ä¼šè¯ä¿¡æ¯ã€‚è¿™å°±æ„å‘³ç€åŸºäº token è®¤è¯æœºåˆ¶çš„åº”ç”¨ä¸éœ€è¦å»è€ƒè™‘ç”¨æˆ·åœ¨å“ªä¸€å°æœåŠ¡å™¨ç™»å½•äº†ï¼Œè¿™å°±ä¸ºåº”ç”¨çš„æ‰©å±•æä¾›äº†ä¾¿åˆ©ã€‚</p>\n<p>æµç¨‹ä¸Šæ˜¯è¿™æ ·çš„ï¼š</p>\n<ul>\n<li>ç”¨æˆ·ä½¿ç”¨ç”¨æˆ·åå¯†ç æ¥è¯·æ±‚æœåŠ¡å™¨</li>\n<li>æœåŠ¡å™¨è¿›è¡ŒéªŒè¯ç”¨æˆ·çš„ä¿¡æ¯</li>\n<li>æœåŠ¡å™¨é€šè¿‡éªŒè¯å‘é€ç»™ç”¨æˆ·ä¸€ä¸ª token</li>\n<li>å®¢æˆ·ç«¯å­˜å‚¨ tokenï¼Œå¹¶åœ¨æ¯æ¬¡è¯·æ±‚æ—¶é™„é€ä¸Šè¿™ä¸ª token å€¼</li>\n<li>æœåŠ¡ç«¯éªŒè¯ token å€¼ï¼Œå¹¶è¿”å›æ•°æ®</li>\n</ul>\n<h3 id=\"jwté•¿ä»€ä¹ˆæ ·\"><a class=\"markdownIt-Anchor\" href=\"#jwté•¿ä»€ä¹ˆæ ·\">#</a> JWT é•¿ä»€ä¹ˆæ ·</h3>\n<p>JWT æ˜¯ç”±ä¸‰æ®µä¿¡æ¯æ„æˆçš„ï¼Œå°†è¿™ä¸‰æ®µä¿¡æ¯æ–‡æœ¬ç”¨ <code>.</code>  é“¾æ¥ä¸€èµ·å°±æ„æˆäº† Jwt å­—ç¬¦ä¸²</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class=\"token punctuation\">.</span>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ<span class=\"token punctuation\">.</span>cThIIoDvwdueQB468K5xDc5633seEFoqwxjF_xSJyQQ</pre></td></tr></table></figure><h3 id=\"jwtçš„æ„æˆ\"><a class=\"markdownIt-Anchor\" href=\"#jwtçš„æ„æˆ\">#</a> JWT çš„æ„æˆ</h3>\n<ul>\n<li>\n<p>ç¬¬ä¸€éƒ¨åˆ†æˆ‘ä»¬ç§°å®ƒä¸ºå¤´éƒ¨ï¼ˆheader)</p>\n</li>\n<li>\n<p>ç¬¬äºŒéƒ¨åˆ†æˆ‘ä»¬ç§°å…¶ä¸ºè½½è·ï¼ˆpayload)</p>\n</li>\n<li>\n<p>ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ç­¾è¯ï¼ˆsignature)</p>\n</li>\n</ul>\n<h4 id=\"å¤´éƒ¨header\"><a class=\"markdownIt-Anchor\" href=\"#å¤´éƒ¨header\">#</a> å¤´éƒ¨ï¼ˆheaderï¼‰</h4>\n<p>jwt çš„å¤´éƒ¨æ‰¿è½½ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š</p>\n<ul>\n<li>å£°æ˜ç±»å‹ï¼Œè¿™é‡Œæ˜¯ jwt</li>\n<li>å£°æ˜åŠ å¯†çš„ç®—æ³• é€šå¸¸ç›´æ¥ä½¿ç”¨ HMAC SHA256</li>\n</ul>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token string\">'typ'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'JWT'</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token string\">'alg'</span><span class=\"token punctuation\">:</span> <span class=\"token string\">'HS256'</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åè¿›è¡Œ base64 åŠ å¯†ï¼ˆè¯¥åŠ å¯†æ˜¯å¯ä»¥å¯¹ç§°è§£å¯†çš„), æ„æˆäº†ç¬¬ä¸€éƒ¨åˆ†.</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9</pre></td></tr></table></figure><h4 id=\"è½½è·playload\"><a class=\"markdownIt-Anchor\" href=\"#è½½è·playload\">#</a> è½½è·ï¼ˆplayloadï¼‰</h4>\n<p>è½½è·å°±æ˜¯å­˜æ”¾æœ‰æ•ˆä¿¡æ¯çš„åœ°æ–¹ï¼Œè¿™äº›æœ‰æ•ˆä¿¡æ¯åŒ…å«ä¸‰ä¸ªéƒ¨åˆ†</p>\n<ul>\n<li>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</li>\n<li>å…¬å…±çš„å£°æ˜</li>\n<li>ç§æœ‰çš„å£°æ˜</li>\n</ul>\n<h5 id=\"æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜-å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨\"><a class=\"markdownIt-Anchor\" href=\"#æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜-å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨\">#</a> <strong>æ ‡å‡†ä¸­æ³¨å†Œçš„å£°æ˜</strong> (å»ºè®®ä½†ä¸å¼ºåˆ¶ä½¿ç”¨) :</h5>\n<p><strong>iss</strong>: jwt ç­¾å‘è€…</p>\n<p><strong>sub</strong>: jwt æ‰€é¢å‘çš„ç”¨æˆ·</p>\n<p><strong>aud</strong>: æ¥æ”¶ jwt çš„ä¸€æ–¹</p>\n<p><strong>exp</strong>: jwt çš„è¿‡æœŸæ—¶é—´ï¼Œè¿™ä¸ªè¿‡æœŸæ—¶é—´å¿…é¡»è¦å¤§äºç­¾å‘æ—¶é—´</p>\n<p><strong>nbf</strong>: å®šä¹‰åœ¨ä»€ä¹ˆæ—¶é—´ä¹‹å‰ï¼Œè¯¥ jwt éƒ½æ˜¯ä¸å¯ç”¨çš„.</p>\n<p><strong>iat</strong>: jwt çš„ç­¾å‘æ—¶é—´</p>\n<p><strong>jti</strong>: jwt çš„å”¯ä¸€èº«ä»½æ ‡è¯†ï¼Œä¸»è¦ç”¨æ¥ä½œä¸ºä¸€æ¬¡æ€§ token, ä»è€Œå›é¿é‡æ”¾æ”»å‡»ã€‚</p>\n<h5 id=\"å…¬å…±çš„å£°æ˜\"><a class=\"markdownIt-Anchor\" href=\"#å…¬å…±çš„å£°æ˜\">#</a> å…¬å…±çš„å£°æ˜ï¼š</h5>\n<p>å…¬å…±çš„å£°æ˜å¯ä»¥æ·»åŠ ä»»ä½•çš„ä¿¡æ¯ï¼Œä¸€èˆ¬æ·»åŠ ç”¨æˆ·çš„ç›¸å…³ä¿¡æ¯æˆ–å…¶ä»–ä¸šåŠ¡éœ€è¦çš„å¿…è¦ä¿¡æ¯ã€‚ä½†ä¸å»ºè®®æ·»åŠ  <code>æ•æ„Ÿä¿¡æ¯</code> ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†åœ¨å®¢æˆ·ç«¯å¯è§£å¯†.</p>\n<h5 id=\"ç§æœ‰çš„å£°æ˜\"><a class=\"markdownIt-Anchor\" href=\"#ç§æœ‰çš„å£°æ˜\">#</a> <strong>ç§æœ‰çš„å£°æ˜</strong> ï¼š</h5>\n<p>ç§æœ‰å£°æ˜æ˜¯æä¾›è€…å’Œæ¶ˆè´¹è€…æ‰€å…±åŒå®šä¹‰çš„å£°æ˜ï¼Œä¸€èˆ¬ä¸å»ºè®®å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸º base64 æ˜¯å¯¹ç§°è§£å¯†çš„ï¼Œæ„å‘³ç€è¯¥éƒ¨åˆ†ä¿¡æ¯å¯ä»¥å½’ç±»ä¸ºæ˜æ–‡ä¿¡æ¯ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre><span class=\"token punctuation\">&#123;</span></pre></td></tr><tr><td data-num=\"2\"></td><td><pre>  <span class=\"token string\">\"sub\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"1234567890\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"3\"></td><td><pre>  <span class=\"token string\">\"name\"</span><span class=\"token punctuation\">:</span> <span class=\"token string\">\"John Doe\"</span><span class=\"token punctuation\">,</span></pre></td></tr><tr><td data-num=\"4\"></td><td><pre>  <span class=\"token string\">\"iat\"</span><span class=\"token punctuation\">:</span> <span class=\"token number\">1516239022</span></pre></td></tr><tr><td data-num=\"5\"></td><td><pre><span class=\"token punctuation\">&#125;</span></pre></td></tr></table></figure><p>ç„¶åè¿›è¡Œ base64 åŠ å¯†ï¼Œå¾—åˆ° Jwt çš„ç¬¬äºŒéƒ¨åˆ†</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ</pre></td></tr></table></figure><h4 id=\"ç­¾è¯signature\"><a class=\"markdownIt-Anchor\" href=\"#ç­¾è¯signature\">#</a> ç­¾è¯ï¼ˆsignatureï¼‰</h4>\n<p>jwt çš„ç¬¬ä¸‰éƒ¨åˆ†æ˜¯ä¸€ä¸ªç­¾è¯ä¿¡æ¯ï¼Œè¿™ä¸ªç­¾è¯ä¿¡æ¯ç”±ä¸‰éƒ¨åˆ†ç»„æˆï¼š</p>\n<ul>\n<li>header (base64 åçš„)</li>\n<li>payload (base64 åçš„)</li>\n<li>secret</li>\n</ul>\n<p>è¿™ä¸ªéƒ¨åˆ†éœ€è¦ base64 åŠ å¯†åçš„ header å’Œ base64 åŠ å¯†åçš„ payload ä½¿ç”¨ <code>.</code>  è¿æ¥ç»„æˆçš„å­—ç¬¦ä¸²ï¼Œç„¶åé€šè¿‡ header ä¸­å£°æ˜çš„åŠ å¯†æ–¹å¼è¿›è¡ŒåŠ ç› <code>secret</code>  ç»„åˆåŠ å¯†ï¼Œç„¶åå°±æ„æˆäº† jwt çš„ç¬¬ä¸‰éƒ¨åˆ†ã€‚</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>HMACSHA256<span class=\"token punctuation\">(</span>base64UrlEncode<span class=\"token punctuation\">(</span>header<span class=\"token punctuation\">)</span> <span class=\"token operator\">+</span> <span class=\"token string\">\".\"</span> <span class=\"token operator\">+</span> base64UrlEncode<span class=\"token punctuation\">(</span>payload<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">,</span>secret<span class=\"token punctuation\">)</span></pre></td></tr></table></figure><p>å°†è¿™ä¸‰éƒ¨åˆ†ç”¨ <code>.</code>  è¿æ¥æˆä¸€ä¸ªå®Œæ•´çš„å­—ç¬¦ä¸²ï¼Œæ„æˆäº†æœ€ç»ˆçš„ jwt:</p>\n<figure class=\"highlight python\"><figcaption data-lang=\"python\"></figcaption><table><tr><td data-num=\"1\"></td><td><pre>eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9<span class=\"token punctuation\">.</span>eyJzdWIiOiIxMjM0NTY3ODkwIiwibmFtZSI6IkpvaG4gRG9lIiwiaWF0IjoxNTE2MjM5MDIyfQ<span class=\"token punctuation\">.</span>cThIIoDvwdueQB468K5xDc5633seEFoqwxjF_xSJyQQ</pre></td></tr></table></figure><p><code>æ³¨æ„ï¼šsecretæ˜¯ä¿å­˜åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œjwtçš„ç­¾å‘ç”Ÿæˆä¹Ÿæ˜¯åœ¨æœåŠ¡å™¨ç«¯çš„ï¼Œsecretå°±æ˜¯ç”¨æ¥è¿›è¡Œjwtçš„ç­¾å‘å’Œjwtçš„éªŒè¯ï¼Œæ‰€ä»¥ï¼Œå®ƒå°±æ˜¯ä½ æœåŠ¡ç«¯çš„ç§é’¥ï¼Œåœ¨ä»»ä½•åœºæ™¯éƒ½ä¸åº”è¯¥æµéœ²å‡ºå»ã€‚ä¸€æ—¦å®¢æˆ·ç«¯å¾—çŸ¥è¿™ä¸ªsecret, é‚£å°±æ„å‘³ç€å®¢æˆ·ç«¯æ˜¯å¯ä»¥è‡ªæˆ‘ç­¾å‘jwtäº†ã€‚</code></p>\n<h3 id=\"ä¸‹åˆ—åœºæ™¯ä¸­ä½¿ç”¨json-web-tokenæ˜¯å¾ˆæœ‰ç”¨çš„\"><a class=\"markdownIt-Anchor\" href=\"#ä¸‹åˆ—åœºæ™¯ä¸­ä½¿ç”¨json-web-tokenæ˜¯å¾ˆæœ‰ç”¨çš„\">#</a> ä¸‹åˆ—åœºæ™¯ä¸­ä½¿ç”¨ JSON Web Token æ˜¯å¾ˆæœ‰ç”¨çš„ï¼š</h3>\n<ul>\n<li>Authorization (æˆæƒ) : è¿™æ˜¯ä½¿ç”¨ JWT çš„æœ€å¸¸è§åœºæ™¯ã€‚ä¸€æ—¦ç”¨æˆ·ç™»å½•ï¼Œåç»­æ¯ä¸ªè¯·æ±‚éƒ½å°†åŒ…å« JWTï¼Œå…è®¸ç”¨æˆ·è®¿é—®è¯¥ä»¤ç‰Œå…è®¸çš„è·¯ç”±ã€æœåŠ¡å’Œèµ„æºã€‚å•ç‚¹ç™»å½•æ˜¯ç°åœ¨å¹¿æ³›ä½¿ç”¨çš„ JWT çš„ä¸€ä¸ªç‰¹æ€§ï¼Œå› ä¸ºå®ƒçš„å¼€é”€å¾ˆå°ï¼Œå¹¶ä¸”å¯ä»¥è½»æ¾åœ°è·¨åŸŸä½¿ç”¨ã€‚</li>\n<li>Information Exchange (ä¿¡æ¯äº¤æ¢) : å¯¹äºå®‰å…¨çš„åœ¨å„æ–¹ä¹‹é—´ä¼ è¾“ä¿¡æ¯è€Œè¨€ï¼ŒJSON Web Tokens æ— ç–‘æ˜¯ä¸€ç§å¾ˆå¥½çš„æ–¹å¼ã€‚å› ä¸º JWT å¯ä»¥è¢«ç­¾åï¼Œä¾‹å¦‚ï¼Œç”¨å…¬é’¥ / ç§é’¥å¯¹ï¼Œä½ å¯ä»¥ç¡®å®šå‘é€äººå°±æ˜¯å®ƒä»¬æ‰€è¯´çš„é‚£ä¸ªäººã€‚å¦å¤–ï¼Œç”±äºç­¾åæ˜¯ä½¿ç”¨å¤´å’Œæœ‰æ•ˆè´Ÿè½½è®¡ç®—çš„ï¼Œæ‚¨è¿˜å¯ä»¥éªŒè¯å†…å®¹æ²¡æœ‰è¢«ç¯¡æ”¹ã€‚</li>\n</ul>\n<h3 id=\"jwtä¸oauth20çš„åŒºåˆ«\"><a class=\"markdownIt-Anchor\" href=\"#jwtä¸oauth20çš„åŒºåˆ«\">#</a> JWT ä¸ OAuth2.0 çš„åŒºåˆ«</h3>\n<ul>\n<li>OAuth2.0 æ˜¯ä¸€ç§æˆæƒæ¡†æ¶ ï¼ŒJWT æ˜¯ä¸€ç§è®¤è¯åè®®</li>\n<li>æ— è®ºä½¿ç”¨å“ªç§æ–¹å¼åˆ‡è®°ç”¨ HTTPS æ¥ä¿è¯æ•°æ®çš„å®‰å…¨æ€§</li>\n<li>OAuth2.0 ç”¨åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹è´¦å·ç™»å½•çš„æƒ…å†µ (æ¯”å¦‚ä½¿ç”¨ weibo, qq, github ç™»å½•æŸä¸ª app)ï¼Œè€Œ JWT æ˜¯ç”¨åœ¨å‰åç«¯åˆ†ç¦»ï¼Œéœ€è¦ç®€å•çš„å¯¹åå° API è¿›è¡Œä¿æŠ¤æ—¶ä½¿ç”¨ã€‚</li>\n</ul>\n<h3 id=\"æ€»ç»“\"><a class=\"markdownIt-Anchor\" href=\"#æ€»ç»“\">#</a> æ€»ç»“</h3>\n<h4 id=\"ä¼˜ç‚¹\"><a class=\"markdownIt-Anchor\" href=\"#ä¼˜ç‚¹\">#</a> ä¼˜ç‚¹</h4>\n<ul>\n<li>å› ä¸º json çš„é€šç”¨æ€§ï¼Œæ‰€ä»¥ JWT æ˜¯å¯ä»¥è¿›è¡Œè·¨è¯­è¨€æ”¯æŒçš„ï¼Œåƒ Python,Java,JavaScript,PHP ç­‰å¾ˆå¤šè¯­è¨€éƒ½å¯ä»¥ä½¿ç”¨ã€‚</li>\n<li>å› ä¸ºæœ‰äº† payload éƒ¨åˆ†ï¼Œæ‰€ä»¥ JWT å¯ä»¥åœ¨è‡ªèº«å­˜å‚¨ä¸€äº›å…¶ä»–ä¸šåŠ¡é€»è¾‘æ‰€å¿…è¦çš„éæ•æ„Ÿä¿¡æ¯ã€‚</li>\n<li>ä¾¿äºä¼ è¾“ï¼Œjwt çš„æ„æˆéå¸¸ç®€å•ï¼Œå­—èŠ‚å ç”¨å¾ˆå°ï¼Œæ‰€ä»¥å®ƒæ˜¯éå¸¸ä¾¿äºä¼ è¾“çš„ã€‚</li>\n<li>å®ƒä¸éœ€è¦åœ¨æœåŠ¡ç«¯ä¿å­˜ä¼šè¯ä¿¡æ¯ï¼Œæ‰€ä»¥å®ƒæ˜“äºåº”ç”¨çš„æ‰©å±•</li>\n</ul>\n<h4 id=\"å®‰å…¨ç›¸å…³\"><a class=\"markdownIt-Anchor\" href=\"#å®‰å…¨ç›¸å…³\">#</a> å®‰å…¨ç›¸å…³</h4>\n<ul>\n<li>ä¸åº”è¯¥åœ¨ jwt çš„ payload éƒ¨åˆ†å­˜æ”¾æ•æ„Ÿä¿¡æ¯ï¼Œå› ä¸ºè¯¥éƒ¨åˆ†æ˜¯å®¢æˆ·ç«¯å¯è§£å¯†çš„éƒ¨åˆ†ã€‚</li>\n<li>ä¿æŠ¤å¥½ secret ç§é’¥ï¼Œè¯¥ç§é’¥éå¸¸é‡è¦ã€‚</li>\n</ul>\n",
            "tags": [
                "jwt"
            ]
        }
    ]
}